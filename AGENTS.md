# Claude Coding Agent Reference Guide

## Project Context

**skill-set** is a unified productivity plugin for Claude Code providing comprehensive development tools and automated workflows. All features are now integrated into a single plugin for simplified installation and management.

### Current Tools

#### Skills
1. **managing-git-workflow**: Automates git operations (commit, push, PR) with context-aware message generation in the project's language and automatic ticket extraction from branch names
2. **understanding-code-context**: Efficient code exploration using LSP symbolic tools (Serena) and official documentation (Context7) instead of text search
3. **browser-automation**: Pre-built Playwright templates (19 scripts) for browser automation tasks without MCP server overhead
4. **consulting-peer-llms**: Execute peer reviews from other LLM tools (Gemini, Codex, Claude) in parallel and synthesize actionable insights
5. **using-skill-set**: Establishes mandatory workflows for finding and using skill-set features at session start

#### Agents
1. **coderabbit-feedback**: Interactive CodeRabbit review processing with severity-based classification, user discussion, and verified completion workflow. Runs as isolated subagent for better context management.

### Project Structure

```
skill-set/                          # Unified plugin
├── .claude-plugin/
│   ├── plugin.json                # Plugin metadata
│   └── marketplace.json           # Marketplace registration
├── .mcp.json                      # MCP server definitions
├── commands/                      # Namespaced slash commands
│   ├── git/
│   │   ├── commit.md             # /skill-set:git:commit
│   │   ├── push.md               # /skill-set:git:push
│   │   └── pr.md                 # /skill-set:git:pr
│   ├── coderabbit/
│   │   └── fix.md                # /skill-set:coderabbit:fix
│   └── consulting/
│       └── review.md             # /skill-set:consulting:review
├── skills/                        # All skills in one location
│   ├── managing-git-workflow/
│   │   ├── SKILL.md
│   │   └── reference/
│   │       ├── commit.md
│   │       ├── push.md
│   │       └── pr.md
│   ├── understanding-code-context/
│   │   ├── SKILL.md
│   │   └── reference/
│   │       ├── tools.md
│   │       ├── workflows.md
│   │       └── anti-patterns.md
│   ├── browser-automation/
│   │   ├── SKILL.md
│   │   ├── reference/
│   │   │   └── TEMPLATES.md
│   │   └── templates/            # 19 Playwright scripts
│   ├── consulting-peer-llms/
│   │   ├── SKILL.md
│   │   └── reference/
│   │       ├── cli-commands.md
│   │       ├── prompt-template.md
│   │       └── report-format.md
│   └── using-skill-set/
│       └── SKILL.md
├── agents/                        # Isolated subagents
│   └── coderabbit-feedback.md
├── hooks/                         # Event handlers
│   └── hooks.json                # SessionStart hook
├── scripts/                       # Utility scripts
│   ├── session-start.sh
│   └── git-helpers.sh
└── docs/                          # Documentation
    └── plans/
```

### Design Patterns Used

- **Progressive disclosure**: Main SKILL.md stays under 500 lines, detailed content in reference files
- **Gerund naming**: All skills use verb+ing format (managing, understanding, browser-automation)
- **Context-aware**: Skills adapt to project language/conventions (e.g., Korean commit messages)
- **Token efficiency**: Symbolic tools over text search, targeted reads over full file scans
- **Language-agnostic templates**: Code examples in English with language detection for user-facing content
- **Namespaced commands**: Prevents command collisions with organized directory structure

---

## Skill Creation Guidance

### Language Handling in Skills

**REPOSITORY LANGUAGE POLICY:**

All repository content MUST be written in **English** by default:
- ✅ SKILL.md documentation files
- ✅ README.md and other markdown files
- ✅ Code comments and docstrings
- ✅ Variable and function names
- ✅ Commit messages
- ✅ PR titles and descriptions
- ✅ Issue descriptions
- ✅ Code examples in documentation

**Exception**: Runtime user-facing output should adapt to user's language (see "Runtime Language Detection" below).

---

**RUNTIME LANGUAGE DETECTION:**

When a skill is executed, detect and use the user's preferred language for conversational output.

**Detection Priority:**
1. **User's current messages** - What language is the user speaking in this conversation?
2. **Project context** - Check target project's CLAUDE.md, README.md for language patterns
3. **Git commit history** - Analyze recent commit messages (`git log --oneline -5`)
4. **Default to English** - If no clear language indication

**What adapts to detected language (runtime only):**
- Conversational messages with user
- Reports and summaries
- Error messages and warnings
- Status updates and prompts
- PR comments generated by the skill

**What always stays in English:**
- Code examples and snippets
- Bash commands and scripts
- File paths and directory names
- Technical API calls and function names
- Tool commands
- Repository documentation (SKILL.md, README.md)

**Template Pattern:**
```markdown
## Example Interaction

```
[In user's language]

Found 5 issues:
- CRITICAL: 2 items
- MAJOR: 3 items

How would you like to proceed?
- [1] Apply all changes
- [2] Review individually
```

**Implementation Example:**
```markdown
## Language Detection

**Detect user's language from conversation context:**
- Check user's message language
- Check project documentation language
- Check recent git commit patterns
- **Default to English if no clear indication**

**Apply detected language to:**
- All user-facing messages
- Reports, comments, summaries
- Error messages

**Always keep in English:**
- Code examples
- Bash commands
- File paths
```

**Why This Matters:**
- Skills are used globally across different language contexts
- User experience improves when communication matches their language
- Code/technical content stays universal for consistency
- Enables seamless collaboration in multilingual teams

**Primary resource**: Use `superpowers:writing-skills` for the complete TDD-based skill creation methodology, including:
- RED-GREEN-REFACTOR cycle for documentation
- Testing with pressure scenarios and subagents
- Bulletproofing against rationalization
- Complete quality checklists

This document provides Anthropic's official best practices as complementary reference.

---

## Anthropic Official Best Practices

### Core Principles Not in writing-skills

#### Appropriate Freedom Levels

**Analogy**: Think of Claude as a robot exploring a path:
- **Narrow bridge with cliffs**: Provide specific guardrails (low freedom) - database migrations, destructive operations
- **Open field with no hazards**: Give general direction (high freedom) - code reviews, exploratory analysis

#### Test Across Models

Verify Skills work with Claude Haiku, Sonnet, and Opus. What works for Opus may need more detail for Haiku.

---

## Workflows & Feedback Loops

### Complex Task Workflows

Break operations into sequential steps with checklists Claude can copy and track progress through. Provide clear step-by-step instructions for multi-stage processes.

### Validation Loops

Implement **"run validator → fix errors → repeat"** patterns to catch errors early and improve output quality.

---

## Code & Scripts Best Practices

### Error Handling: Solve, Don't Punt

Scripts should handle error conditions explicitly with helpful messages rather than failing silently. Provide alternatives instead of punting to Claude.

### Document Configuration Values

Avoid "voodoo constants" (Ousterhout's law). If you don't know the right value, how will Claude determine it? Document why each configuration value was chosen.

### Utility Scripts

Pre-made scripts are more reliable than generated code and save tokens. Clarify whether Claude should execute scripts or read them as reference.

### Package Dependencies

List required packages in SKILL.md and verify they're available in the code execution environment. Always be explicit about installation requirements.

---

## Evaluation-Driven Development

Create evaluations BEFORE extensive documentation to solve real problems rather than imagined ones:

1. **Identify gaps**: Run Claude on representative tasks without the Skill
2. **Create evaluations**: Build scenarios that test these gaps
3. **Establish baseline**: Measure performance without the Skill
4. **Write minimal instructions**: Address the gaps
5. **Iterate**: Execute evaluations, compare, refine

### Iterative Development Pattern

Work with one Claude instance to create Skills, test with other instances in real tasks. Observe behavior, gather insights, iterate based on actual usage patterns.

**Note**: See `superpowers:writing-skills` for complete TDD-based testing methodology with pressure scenarios and subagents.

---

## Runtime Environment & Technical Notes

### How Claude Accesses Skills

- **Metadata pre-loaded**: Name and description from all Skills loaded at startup
- **Files read on-demand**: SKILL.md and references loaded only when needed
- **Scripts executed efficiently**: Utility scripts run without loading full contents into context
- **Progressive disclosure**: No context penalty for large reference files until accessed

### File Path Best Practices

- Use forward slashes universally (never backslashes)
- Name files descriptively: `form_validation_rules.md`, not `doc2.md`
- Organize for discovery: `reference/finance.md`, not `docs/file1.md`
- Make execution intent clear: "Run script.py" (execute) vs "See script.py" (reference)

### MCP Tool References

Always use fully qualified tool names: `ServerName:tool_name`

Example: `BigQuery:bigquery_schema` or `GitHub:create_issue`

Without the server prefix, Claude may fail to locate the tool.

---

## Additional Resources

- **Primary methodology**: Use `superpowers:writing-skills` skill for TDD-based skill creation
- [Anthropic Official Best Practices](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices)
- [Skills Overview](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview)
- [Project Repository](https://github.com/ether-moon/skill-set)
